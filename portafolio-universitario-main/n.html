<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de C√≥digo - Visual Studio Style</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="vscode-container">
        <!-- Header del IDE -->
        <div class="vscode-header">
            <div class="window-controls">
                <div class="control close"></div>
                <div class="control minimize"></div>
                <div class="control maximize"></div>
            </div>
            <div class="title-bar">
                <span class="file-icon">üìÑ</span>
                <span class="file-name">audiencia_tv.cpp</span>
                <span class="unsaved">‚óè</span>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs-container">
            <div class="tab active">
                <span class="tab-icon">üìÅ</span>
                <span class="tab-name">audiencia_tv.cpp</span>
                <span class="tab-close">√ó</span>
            </div>
        </div>

        <!-- Editor Principal -->
        <div class="editor-container">
            <!-- Sidebar con n√∫meros de l√≠nea -->
            <div class="line-numbers" id="lineNumbers"></div>
            
            <!-- √Årea de c√≥digo -->
            <div class="code-editor">
                <pre class="code-content" id="codeContent"><code class="typewriter" id="typewriterCode"></code></pre>
                <div class="cursor" id="cursor"></div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-left">
                <span class="status-item">üîµ C++</span>
                <span class="status-item">UTF-8</span>
                <span class="status-item">CRLF</span>
            </div>
            <div class="status-right">
                <span class="status-item">Ln <span id="currentLine">1</span>, Col <span id="currentCol">1</span></span>
                <span class="status-item">Spaces: 4</span>
                <span class="status-item">üîß</span>
            </div>
        </div>
    </div>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            overflow: hidden;
            height: 100vh;
        }

        /* Contenedor principal */
        .vscode-container {
            width: 100%;
            height: 100vh;
            background: #1e1e1e;
            display: flex;
            flex-direction: column;
        }

        /* Header del IDE */
        .vscode-header {
            background: #2d2d30;
            border-bottom: 1px solid #3e3e42;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
        }

        .window-controls {
            display: flex;
            gap: 8px;
        }

        .control {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
        }

        .control.close { background: #ff5f57; }
        .control.minimize { background: #ffbd2e; }
        .control.maximize { background: #28ca42; }

        .title-bar {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #cccccc;
        }

        .unsaved {
            color: #ffffff;
            font-weight: bold;
        }

        /* Tabs */
        .tabs-container {
            background: #2d2d30;
            border-bottom: 1px solid #3e3e42;
            height: 35px;
            display: flex;
            align-items: center;
        }

        .tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: #1e1e1e;
            border-right: 1px solid #3e3e42;
            font-size: 13px;
            color: #cccccc;
            cursor: pointer;
        }

        .tab.active {
            background: #1e1e1e;
            color: #ffffff;
        }

        .tab-close {
            opacity: 0.6;
        }

        .tab-close:hover {
            opacity: 1;
        }

        /* Editor Container */
        .editor-container {
            flex: 1;
            display: flex;
            background: #1e1e1e;
            overflow: hidden;
        }

        /* N√∫meros de l√≠nea */
        .line-numbers {
            background: #1e1e1e;
            border-right: 1px solid #3e3e42;
            padding: 20px 15px 20px 20px;
            color: #858585;
            font-size: 14px;
            line-height: 1.6;
            text-align: right;
            min-width: 60px;
            font-weight: 400;
            user-select: none;
        }

        /* Editor de c√≥digo */
        .code-editor {
            flex: 1;
            position: relative;
            overflow: auto;
        }

        .code-content {
            margin: 0;
            padding: 20px;
            font-size: 14px;
            line-height: 1.6;
            color: #d4d4d4;
            background: transparent;
            overflow: visible;
            white-space: pre;
            font-family: 'Fira Code', 'Consolas', 'Monaco', monospace;
        }

        /* Cursor */
        .cursor {
            position: absolute;
            width: 2px;
            height: 22px;
            background: #ffffff;
            animation: blink 1s infinite;
            top: 20px;
            left: 20px;
            z-index: 10;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Syntax Highlighting */
        .keyword { color: #569cd6; font-weight: 500; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; font-style: italic; }
        .number { color: #b5cea8; }
        .type { color: #4ec9b0; }
        .function { color: #dcdcaa; }
        .preprocessor { color: #c586c0; }
        .operator { color: #d4d4d4; }
        .punctuation { color: #d4d4d4; }

        /* Status Bar */
        .status-bar {
            background: #007acc;
            height: 22px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            font-size: 12px;
            color: #ffffff;
        }

        .status-left, .status-right {
            display: flex;
            gap: 15px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .code-content {
                font-size: 12px;
                padding: 15px;
            }
            
            .line-numbers {
                padding: 15px 10px 15px 15px;
                min-width: 50px;
                font-size: 12px;
            }
            
            .cursor {
                height: 18px;
                top: 15px;
                left: 15px;
            }
        }
    </style>

    <script>
        const codeText = `#include <iostream>
#include <limits>

using namespace std;

struct AUDIENCIA {
    int f1_menor = 0, f1_mayor = 0;
    int f2_menor = 0, f2_mayor = 0;
    int f3_menor = 0, f3_mayor = 0;
    int f4_menor = 0, f4_mayor = 0;
};

int Conv_edad(int edad) {
    return (edad < 30) ? 0 : 1;
}

int Conv_hora(int hora, int minuto) {
    int total_min = hora * 60 + minuto;

    if (total_min < 14 * 60)       return 1;  // Antes de las 14h
    else if (total_min < 20 * 60)  return 2;  // 14h a 20h
    else if (total_min < 22 * 60)  return 3;  // 20h a 22h
    else                           return 4;  // Despu√©s de las 22h
}

void Incluir(AUDIENCIA &A, int edad, int hora, int minuto) {
    int franja = Conv_hora(hora, minuto);
    int grupo = Conv_edad(edad);

    // Sumar al contador correspondiente
    if (franja == 1) {
        if (grupo == 0) A.f1_menor++;
        else A.f1_mayor++;
    } else if (franja == 2) {
        if (grupo == 0) A.f2_menor++;
        else A.f2_mayor++;
    } else if (franja == 3) {
        if (grupo == 0) A.f3_menor++;
        else A.f3_mayor++;
    } else if (franja == 4) {
        if (grupo == 0) A.f4_menor++;
        else A.f4_mayor++;
    }
}

int Consulta(AUDIENCIA A, int franja) {
    switch (franja) {
        case 1: return A.f1_menor + A.f1_mayor;
        case 2: return A.f2_menor + A.f2_mayor;
        case 3: return A.f3_menor + A.f3_mayor;
        case 4: return A.f4_menor + A.f4_mayor;
        default: return 0;
    }
}

int Maximo(AUDIENCIA A) {
    int total1 = Consulta(A, 1);
    int total2 = Consulta(A, 2);
    int total3 = Consulta(A, 3);
    int total4 = Consulta(A, 4);

    int max = total1;
    int franja = 1;

    if (total2 > max) {
        max = total2;
        franja = 2;
    }
    if (total3 > max) {
        max = total3;
        franja = 3;
    }
    if (total4 > max) {
        max = total4;
        franja = 4;
    }

    return franja;
}

int LeerEntero(string mensaje, int min, int max) {
    int valor;
    while (true) {
        cout << mensaje;
        cin >> valor;

        if (cin.fail() || valor < min || valor > max) {
            cin.clear();
            cin.ignore(numeric_limits<streamsize>::max(), '\n');
            cout << "Entrada inv√°lida. Debe ser un numero entre " << min << " y " << max << ".\n";
        } else {
            cin.ignore(numeric_limits<streamsize>::max(), '\n');
            return valor;
        }
    }
}

void MostrarPorcentajes(AUDIENCIA A, int total) {
    if (total == 0) {
        cout << "No hay datos de audiencia aun.\n";
        return;
    }

    for (int i = 1; i <= 4; i++) {
        int cantidad = Consulta(A, i);
        float porcentaje = (float)cantidad * 100 / total;
        cout << "Franja " << i << ": " << porcentaje << "% (" << cantidad << " personas)\n";
    }
}

// Funci√≥n principal
int main() {
    AUDIENCIA A;
    int total_televidentes = 0;
    char opcion;

    do {
        // Men√∫ principal
        cout << "\n--------- MENU --------\n";
        cout << "1. Ingresar televidente\n";
        cout << "2. Mostrar porcentaje de audiencia\n";
        cout << "3. Mostrar franja con mayor audiencia\n";
        cout << "4. Salir\n";
        cout << "Seleccione una opcion (1-4): ";
        cin >> opcion;
        cin.ignore(numeric_limits<streamsize>::max(), '\n');

        switch (opcion) {
            case '1': {
                // Ingreso de televidente con validaciones
                int edad = LeerEntero("Ingrese edad : ", 1, 120);
                int hora = LeerEntero("Ingrese hora (0-23): ", 0, 23);
                int minuto = LeerEntero("Ingrese minutos (0-59): ", 0, 59);

                Incluir(A, edad, hora, minuto);
                total_televidentes++;
                break;
            }

            case '2':
                // Mostrar porcentaje por franja
                MostrarPorcentajes(A, total_televidentes);
                break;

            case '3':
                // Mostrar franja con mayor audiencia
                if (total_televidentes == 0) {
                    cout << "No hay datos de audiencia aun.\n";
                } else {
                    int franja = Maximo(A);
                    cout << "La franja con mayor audiencia es la n√∫mero " << franja << ".\n";
                }
                break;

            case '4':
                cout << "Saliendo del programa. ¬°Hasta luego!\n";
                break;

            default:
                cout << "Opcion invalida. Intente nuevamente.\n";
                break;
        }

    } while (opcion != '4');

    return 0;
}`;

        function applySyntaxHighlighting(text) {
            // Solo escapar caracteres HTML y devolver texto plano
            return text.replace(/&/g, '&amp;')
                      .replace(/</g, '&lt;')
                      .replace(/>/g, '&gt;');
        }

        function generateLineNumbers(text) {
            const lines = text.split('\n');
            const lineNumbersContainer = document.getElementById('lineNumbers');
            lineNumbersContainer.innerHTML = '';
            
            for (let i = 1; i <= lines.length; i++) {
                const lineDiv = document.createElement('div');
                lineDiv.textContent = i;
                lineNumbersContainer.appendChild(lineDiv);
            }
        }

        function typewriterEffect() {
            const codeElement = document.getElementById('typewriterCode');
            const cursor = document.getElementById('cursor');
            const currentLineSpan = document.getElementById('currentLine');
            const currentColSpan = document.getElementById('currentCol');
            const codeEditor = document.querySelector('.code-editor'); // Contenedor con scroll
            
            let index = 0;
            let currentLine = 1;
            let currentCol = 1;
            let isStarted = false; // Control para iniciar la animaci√≥n
            
            generateLineNumbers(codeText);
            
            // Mostrar mensaje inicial
            codeElement.innerHTML = '<span style="color: #858585; font-style: italic;"></span>';
            
            function type() {
                if (index < codeText.length) {
                    const char = codeText.charAt(index);
                    const currentText = codeText.substring(0, index + 1);
                    
                    // Actualizar el texto
                    codeElement.innerHTML = applySyntaxHighlighting(currentText);
                    
                    // Actualizar posici√≥n del cursor
                    if (char === '\n') {
                        currentLine++;
                        currentCol = 1;
                    } else {
                        currentCol++;
                    }
                    
                    // Actualizar status bar
                    currentLineSpan.textContent = currentLine;
                    currentColSpan.textContent = currentCol;
                    
                    // Posicionar cursor
                    const lineHeight = 22.4; // 14px * 1.6 line-height
                    const charWidth = 8.4; // Aproximado para Fira Code
                    
                    const cursorTop = 20 + (currentLine - 1) * lineHeight;
                    const cursorLeft = 20 + (currentCol - 1) * charWidth;
                    
                    cursor.style.top = cursorTop + 'px';
                    cursor.style.left = cursorLeft + 'px';
                    
                    // Scroll autom√°tico: seguir el cursor
                    const editorHeight = codeEditor.clientHeight;
                    const scrollTop = codeEditor.scrollTop;
                    const cursorPosition = cursorTop;
                    
                    // Si el cursor est√° cerca del final de la ventana visible, hacer scroll
                    if (cursorPosition > scrollTop + editorHeight - 100) {
                        codeEditor.scrollTop = cursorPosition - editorHeight + 150;
                    }
                    
                    index++;
                    setTimeout(type, Math.random() * 30 + 20); // Velocidad variable m√°s realista
                } else {
                    // Ocultar cursor al terminar
                    cursor.style.display = 'none';
                }
            }
            
            // Escuchar tecla ESPACIO para iniciar
            document.addEventListener('keydown', function(event) {
                if (event.code === 'Space' && !isStarted) {
                    isStarted = true;
                    codeElement.innerHTML = ''; // Limpiar mensaje inicial
                    type(); // Iniciar la animaci√≥n
                    event.preventDefault(); // Evitar scroll de p√°gina
                }
            });
            
            // Posicionar cursor al inicio
            cursor.style.top = '20px';
            cursor.style.left = '20px';
        }

        // Iniciar el efecto cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', typewriterEffect);
    </script>
</body>
</html>
    